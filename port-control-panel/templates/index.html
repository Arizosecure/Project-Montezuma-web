<!DOCTYPE HTML>
<html>
	<head>
		<title>Project Montezuma </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="icon" type="image/png" href="/images/20220326_083653.jpg">
	</head>
	<body class="no-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Inner -->
						<div class="inner">
							<header>
								<h1><a href="/images/20220326_083653.jpg" id="logo"ArizoSecure</a></h1>
							</header>
						</div>

					<!-- Nav -->
					<nav id="nav">
						<ul>
										<li><a href="index.html">Home</a></li>
										<li><a href="contactus.html">Contact Us</a></li>
							<li><a href="aboutus.html">About Us</a></li>
							<li><a href="ourservices.html">Our Services</a></li>
							<li><a href="aidivision.html">Our AI Division</a></li>
							<li><a href="login.php">Sign In </a></li>
						</ul>
					</nav>


<!DOCTYPE html>
<html>
<head>
    <title>Network Control Panel</title>
</head>
<body>
    <h1>Network Control Panel</h1>
    
    <div id="loginForm" style="display:none;">
        <form method="post" action="/login">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
            <button type="submit">Login</button>
        </form>
    </div>

    <div id="controlPanel" style="display:none;">
        <h2>Port Control</h2>
        <form id="portForm">
            <label for="port">Enter Port Number:</label>
            <input type="number" id="port" name="port" min="1" max="65535" required>
            <label for="protocol">Protocol:</label>
            <select id="protocol" name="protocol">
                <option value="tcp">TCP</option>
                <option value="udp">UDP</option>
                <option value="both">Both</option>
            </select>
            <button type="button" onclick="allowPort()">Allow Port</button>
            <button type="button" onclick="denyPort()">Deny Port</button>
        </form>

        <h2>Guest Network Control</h2>
        <form method="post" action="/guest_network">
            <label for="switch">Guest Network Isolation:</label>
            <input type="checkbox" id="switch" name="switch" value="on">
            <input type="submit" value="Save">
        </form>

        <h2>Current UFW Rules</h2>
        <pre id="ufwRules"></pre>
    </div>

    <div id="status">{{ message }}</div>

    <script>
        function allowPort() {
            var port = document.getElementById('port').value;
            var protocol = document.getElementById('protocol').value;
            if (protocol === 'both') {
                fetch('/allow_port?port=' + port + '&protocol=tcp', { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));

                fetch('/allow_port?port=' + port + '&protocol=udp', { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));
            } else {
                fetch('/allow_port?port=' + port + '&protocol=' + protocol, { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));
            }
        }

        function denyPort() {
            var port = document.getElementById('port').value;
            var protocol = document.getElementById('protocol').value;
            if (protocol === 'both') {
                fetch('/deny_port?port=' + port + '&protocol=tcp', { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));

                fetch('/deny_port?port=' + port + '&protocol=udp', { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));
            } else {
                fetch('/deny_port?port=' + port + '&protocol=' + protocol, { method: 'GET' })
                .then(response => response.text())
                .then(data => updateStatus(data))
                .catch(error => updateStatus('Error: ' + error, true));
            }
        }

        function fetchUfwRules() {
            fetch('/get_ufw_rules', { method: 'GET' })
            .then(response => response.text())
            .then(data => {
                document.getElementById('ufwRules').innerText = data;
            })
            .catch(error => updateStatus('Error fetching UFW rules: ' + error, true));
        }

        function updateStatus(message, error = false) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerText = message;
            statusDiv.className = error ? 'error' : '';
        }

        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();
            var formData = new FormData(event.target);
            fetch('/login', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('controlPanel').style.display = 'block';
                    fetchUfwRules();
                } else {
                    updateStatus('Login failed', true);
                }
            })
            .catch(error => updateStatus('Error: ' + error, true));
        });

        window.onload = function() {
            document.getElementById('loginForm').style.display = 'block';
        }
    </script>
</body>
</html>

			<!-- Footer -->
			<div id="footer">
				<div class="container">
					<div class="row">

					</div>
					<div class="row">
						<div class="col-12">

							<!-- Contact -->
								<section class="contact">
									<header>
										<h3>Our Mission Statment</h3>
									</header>
									<p>At ArizoSecure, our mission extends beyond simply providing cybersecurity solutions. We're dedicated to serving the state of Arizona and its surrounding areas by safeguarding the digital infrastructure of businesses and organizations within our community and the beautiful state we call home. 
									</p>
									<ul class="icons">
										<li><a href="https://twitter.com/ArizoSecure" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
										<li><a href="https://www.instagram.com/arizosecure/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="https://www.linkedin.com/company/arizosecure-technologies" class="icon brands fa-linkedin-in"><span class="label">Linkedin</span></a></li>
									</ul>
								</section>

							<!-- Copyright -->
								<div class="copyright">
									<ul class="menu">
										<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="https://github.com/GavinCyber">GavinCyber</a></li>
									</ul>
								</div>

						</div>

					</div>
				</div>
			</div>


		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>